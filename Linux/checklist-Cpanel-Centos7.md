# Checklist sử dụng CPanel
# Mục Lục
[I. Hướng dẫn cài đặt Cpanel trên Centos7](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#i-h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-c%C3%A0i-%C4%91%E1%BA%B7t-cpanel-tr%C3%AAn-centos7)

[1. Đăng ký tài khoản dùng thử 15 ngày](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#1-%C4%91%C4%83ng-k%C3%BD-t%C3%A0i-kho%E1%BA%A3n-d%C3%B9ng-th%E1%BB%AD-15-ng%C3%A0y)

[2. Tiến hành cài đặt](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#2-ti%E1%BA%BFn-h%C3%A0nh-c%C3%A0i-%C4%91%E1%BA%B7t)

  - [2.1 cài đặt trên Centos 7](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#21-c%C3%A0i-%C4%91%E1%BA%B7t-tr%C3%AAn-centos-7)

  - [2.2 Cài đặt trên Portal](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#22-c%C3%A0i-%C4%91%E1%BA%B7t-tr%C3%AAn-portal)

[II. tìm hiểu tính năng trên Cpanel](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#ii-t%C3%ACm-hi%E1%BB%83u-t%C3%ADnh-n%C4%83ng-tr%C3%AAn-cpanel)

[1 Giới Thiệu](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#1-gi%E1%BB%9Bi-thi%E1%BB%87u)


[2 File Modules](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#2-file-modules)

[3. Quản lý domain – Tên miền](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#3-qu%E1%BA%A3n-l%C3%BD-domain--t%C3%AAn-mi%E1%BB%81n)

[4. E-mail](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#4-e-mail)

[5. Metrics](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#5-metrics)

[6. SECURITY](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#6-security)

[7. Software](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#7-software)

[8. Advanced](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#8-advanced)

[9. Preferences](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#9-preferences)

[III. Thực hiện Check list](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#iii-th%E1%BB%B1c-hi%E1%BB%87n-check-list)
[1. Tạo gói Packages](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#1-t%E1%BA%A1o-g%C3%B3i-packages)
[2. Tạo Client, Domain](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#2-t%E1%BA%A1o-client-domain)
[3. Tạo tài khoản FTP,Database và up 1 site wordpress ví dụ.](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#3-t%E1%BA%A1o-t%C3%A0i-kho%E1%BA%A3n-ftpdatabase-v%C3%A0-up-1-site-wordpress-v%C3%AD-d%E1%BB%A5)
  - [3.1 Tạo tài khoản FTP.](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#31-t%E1%BA%A1o-t%C3%A0i-kho%E1%BA%A3n-ftp)
  - [3.2 Tạo DB](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#32-t%E1%BA%A1o-db)
  - [3.3 up site Wordpress](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#33-up-site-wordpress)

[4. Cài đặt Plugin Let's Encrypt trên cPanel](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#4-c%C3%A0i-%C4%91%E1%BA%B7t-plugin-lets-encrypt-tr%C3%AAn-cpanel)

[5. Tạo E-mail cho khách hàng theo tên miền](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#5-t%E1%BA%A1o-e-mail-cho-kh%C3%A1ch-h%C3%A0ng-theo-t%C3%AAn-mi%E1%BB%81n)

[6. kiểm tra tính năng gửi mail thông báo cho khách hàng khi thay đổi thông tin](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#6-ki%E1%BB%83m-tra-t%C3%ADnh-n%C4%83ng-g%E1%BB%ADi-mail-th%C3%B4ng-b%C3%A1o-cho-kh%C3%A1ch-h%C3%A0ng-khi-thay-%C4%91%E1%BB%95i-th%C3%B4ng-tin)

[7. Backups Database, code](https://github.com/thang290298/work-Document/blob/master/Linux/checklist-Cpanel-Centos7.md#7-backups-database-code)


## I. Hướng dẫn cài đặt Cpanel trên Centos7
### 1. Đăng ký tài khoản dùng thử 15 ngày
- đăng ký tài khoản dùng thử 15 ngày tại [đây](https://cpanel.net/products/trial/)
- sau khi đăng kí dùng thử sẽ nhận được thông tin email thoong báo cài đặt dùng thử :


<img src="https://image.prntscr.com/image/DAH_b9r0QIGBcf-qJ9ZFXQ.png">

- kiểm tra thông tin phiên bản tại [đây](https://verify.cpanel.net/app/verify)


<img src="https://image.prntscr.com/image/PWQV_esGR-_b1zn5fBgpfw.png">

### 2. Tiến hành cài đặt
#### 2.1 cài đặt trên Centos 7
- ssh vào bằng tài khoản có quyền sudo
- Mặc định, cPanel sẽ không hỗ trợ Network Manager service. Do đó để có thể cài đặt được, bạn cần phải tắt service này đi theo các bước sau:
```
systemctl stop NetworkManager.service
systemctl disable NetworkManager.service
```
- để cài đặt tiến hành chạy lệnh
```
cd /home && curl -o latest -L https://securedownloads.cpanel.net/latest && sh latest
```
sau khi cài đặt thành công sẽ hiển thị thông tin đang nhập WHM

<img src="https://image.prntscr.com/image/V_Or8cQxQy_eiPdajiTgTQ.png">

đăng nhập bằng tài khoản `root` và tiến hành cấu hình cài đặt:

<img src="https://image.prntscr.com/image/PUXAMjaASIyML5306ruaeQ.png">

kết quả: 
<img src="https://image.prntscr.com/image/-0sgApEqQga6TlS3O9Qxjg.png">

#### 2.2 Cài đặt trên Portal
- Đăng nhập tài khoản Portal
- Chon Server muốn cài đặt và tiến hành rebuild server

<img src="https://image.prntscr.com/image/F7vkipxLQRmxRa8tQNa1qQ.png">
- tiến hành cài đặt Cpanel trên CentOS 7

<img src="https://image.prntscr.com/image/MDfCs0bzTc2rcwA93nlsSQ.png">
- sau khi cài đăt thành công bạn sẽ nhận được email thông tin 
<img src="https://image.prntscr.com/image/M4NK0jmAQpG5oC2xUvqw2A.png">
- Thực hiện setup trên WebGUi
```
https://45.117.80.147:2087
```
<img src="https://image.prntscr.com/image/_Hm2yr5MQlWYaOx1Y9I8vw.png">

## II. tìm hiểu tính năng trên Cpanel
### 1 Giới Thiệu
cPanel hosting là Linux web hosting đã có cài đặt sẵn cPanel. cPanel có ưu điểm và nhược điểm, nhưng với hầu hết các trường hợp, nó đều hoạt động hiệu quả. Vì vậy cPanel là lựa chọn tốt cho tất cả những ai đang tìm kiếm giải pháp control panel cho hosting. Bạn có thể tham khảo đánh giá của chúng tôi:
- Ưu điểm:
   - Dễ tìm hiểu
   - Dễ sử dụng
   - Tiết kiệm thời gian và tiền bạn
   - Đã được thử nghiệm kỹ càng
   - Có trình cài đặt tự động
   - Nhiều hướng dẫn/bài viết trên mạng
- Nhược điểm:
   - Có nhiều tính năng không cần thiết
   - Dễ vô tình thay đổi các thông số quan trọng mà
   - Một số host chạy bản cPanel cũ
   - Tốn kém hơn vì thường cPanel không đính kèm trong các gói hosting miễn phí
### 2 File Modules:
<img src="https://image.prntscr.com/image/Gn7ynH5oQci5Gd8QUy66Cw.png">

Những modules này cho phép bạn trực tiếp upload và quản lý file từ trong cPanel mà không cần tài khoản FTP client. Bạn có thể cài đặt mức độ bảo mật, backup và nhiều thứ khác. Những modules thông dụng nhất là:
   - Backup
   - Backup Wizard
   - Directory Privacy
   - Disk Usage
   - File Manager
   - Images
   - Web Disk
   - FTP Accounts
   - FTP Connections


### 3. Quản lý domain – Tên miền

<img src="https://image.prntscr.com/image/X5haGoMkRyWtmHbnHWUThQ.png">

  - Subdomains: Tên miền con
  - Addon Domain: Với cùng 1 tài khoản hosting có thể chạy thêm domain và website
  - Parker Domains : Cho phép chạy 1 site trên nhiều domain khác nhau
  - Redirects: Chuyển hướng domain
  - Zone Editor: Cập nhật các bản ghi DNS cho domain
  ### 4. E-mail

<img src="https://image.prntscr.com/image/lV-3Yad8S2OD202ahpmKFQ.png">

Không phải tất cả web hosting đều bao gồm email, nhưng nếu gói hosting của bạn có cả email và cPanel vậy thì phần này là để quản lý Email. Các modules thông dụng nhất là:
  - Address Importer
  - Apache SpamAssassin
  - Autoresponders
  - Default Address
  - Email Wizard
  - Encryption
  - Forwarders
  - Global Filters
  - MX Entry
  - Track Delivery
  - User Filters
### 5. Metrics
<img src="https://image.prntscr.com/image/46uORfV7SCyAKb91cm-Qlg.png">

Nếu bạn đang chạy một website và đang quan tâm đến thống kê truy cập của nó. Vậy bạn cần tìm đến khu vực Metrics này. Khu vực này để đưa ra cho bạn toàn bộ thông số thống kê mà có thể giúp bạn đánh giá website có hoạt động hiệu quả không. Các modules thông dụng là:
  - Awstats
  - Bandwidth
  - CPU and Concurrent Connection Usage
  - Errors
  - Raw Access
  - Visitors
  - Webalizer
  - Webalizer FTP
### 6. SECURITY

<img src="https://image.prntscr.com/image/GnVbVvTWSjW8aibTINbjQA.png">

Bảo mật là ưu tiên hàng đầu của nhiều webmaster, đặc biệt là nếu website của bạn chứa các thông tin nhạy cảm như usnername, password và thông tin tài chính. Module này sẽ giúp bạn quản lý các vấn đề liên quan đến bảo mật, làm website của bạn an toàn hơn. Các modules thông dụng nhất là:
  - Hotlink Protection
  - IP Blocker
  - Leech Protection
  - SSH Access
  - SSL/TLS
  - Let's Encrypt™ SSL

### 7. Software

<img src="https://image.prntscr.com/image/s75QmFaDQfC3RazXivOlLA.png">

Module này chủ yếu dùng nhiều các phần mềm PHP và Perl, người dùng thông thường không cần lắm những tính năng trong này. Các modules thông dụng nhất là:
  - Softaculpis Apps Installer
  - Optimize Website
  - Perl Modules
  - PHP PEAR Packages
  - CloudFlare
  - PHP Version Selector

### 8. Advanced

<img src="https://image.prntscr.com/image/-gs69L1xS7e0BS2pboPRsQ.png">

Như tiêu đề, những thông số này dành cho người dùng chuyên nghiệp. Các modules thông dụng nhất:
  
   - Apache Handlers
   - Cron Jobs
   - Error Pages
   - Indexes
   - MIME Types
   - Track DNS

### 9. Preferences

<img src="https://image.prntscr.com/image/nrYqUpsUTKax9VUQG3cSUQ.png">

Đây là nơi bạn tùy biến giao diện của cPanel để làm cho nó tiện nhìn hơn. Những modules thông dụng nhất là:
   - Change Language: đổi ngôn ngữ cPanel
   - Change Main Domain: đổi tên miền
   - Getting Started Wizard: quy trình khi mới dùng
   - Manage Resources: Quản lý tài nguyên
   - Shortcuts
   - Update Contact Info: cập nhật thông tin cá nhân
   - Video Tutorials: hướng dẫn bằng video
## III. Thực hiện Check list
### 1. Tạo gói Packages

Đăng nhập WHM bằng tài khoản `root` tới mục `Manage Your Accounts` chọn : ` Add a Package`

<img src="https://image.prntscr.com/image/2lsjNrZuQUCJ5_eLeTVl5g.png">

- tại đây chúng ta  điền thống tin tên `package` và dung lương các gói cho phù hợp và tiến hành ` add` Package.


<img src="https://image.prntscr.com/image/TqZfxwXiT-yWzm_bd0wbzA.png">

### 2. Tạo Client, Domain

- Để tạo tài khoản cPanel trên WHM chúng ta làm như sau:
   - Trang chủ WHM >> Account Funtions >> Create a New Account.
- Domain Information là nơi thiết lập các thông tin cơ bản cho tài khoản cPanel.

<img src="https://image.prntscr.com/image/ehsciEiKTMSqUUhX1RpBZQ.png">

  - Domain: Địa chỉ tên miền
  - Username: Tài khoản dùng để đăng nhâp vào thệ thống cPanel
  - Password: Mật khẩu của tài khoản
  - Re-type Password: Nhập lại mật khẩu lần nữa
  - Email: Email của tài khoản tên miền

- Package cho phép chỉ định một package vào một tài khoản mới

<img src="https://image.prntscr.com/image/1I8NdoAzTYabS-VtTG2Vxw.png">

- Setting cho phép thiết lập chủ đề mặc định của cPanel:

<img src="https://image.prntscr.com/image/9deyuSEfTlCSPZOV8eKiZg.png">


- Mail Routing Settings cho phép chỉ định cách thư được chuyển cho tài khoản mới.
<img src="https://image.prntscr.com/image/c7-lI1b5Rx_NywWDuXApCA.png">
   
   - Automatically Detect Configuration: Tự động thiết lập cấu hình hoạt động.
   - Local Mail Exchanger: Cấu hình mail nội bộ, chấp nhận mail local cho các tên miền mới.
   - Backup Mail Exchanger: Cấu hình máy chủ thành mail dự phòng cho tên miền này.
   - Remote Mail Exchanger: Tính năng này không chấp nhận bởi mail local.

- DNS Setting cho phép thiết lập DNS cho tên miền của tài khoản

   <img src="https://image.prntscr.com/image/8mKcEZBjT3arvfViz-jFOw.png">

   - Enable DKIM on this account: DKIM (DomainKeys Indentified Mail) là một dạng chữ kỹ điện tử được đưa vào tiêu đề đầy đủ của email của bạn để xác định nguồn gốc của nơi mà thông điệp được gửi đi.
   - Enable SPF on this account: SPF – mở rộng hỗ trợ cho giao thức gửi mail (SMTP). SPF cho phép nhận dạng, chứng thực và loại bỏ những nội dung mail từ địa chỉ mail giả mạo.
   - Use the nameservers specified at the Domain’s Registrar. (Ignore locallly specified nameserver.): Sử dụng nameserver được đăng kí tại nơi mua domain.
   
- Sau khi điền đầy đủ các thông tin nêu ở trên, nhấn `Create` để tạo user.
kết quả:

<img src="https://image.prntscr.com/image/R8DblRSSRtiwFHULtD3ljQ.png">

### 3. Tạo tài khoản FTP,Database và up 1 site wordpress ví dụ.
#### 3.1 Tạo tài khoản FTP.
- Để tạo tài khoản FTP trên cPanel. Các bạn có thể nhấn vào `FTP Accounts` như hình sau:
<img src="https://image.prntscr.com/image/80bWvMReRLWS482GfKC3eQ.png">

- tiếp theo ta điển tên user và thông tin mật khẩu:

<img src="https://image.prntscr.com/image/9Y2JrDpjTbO06WVM-F_5eg.png">

- sử dụng fiezilla để đẩy file từ `local` hosting

<img src="https://image.prntscr.com/image/bNmDPX_iTHaU9TBhCteCsA.png">

- tiến hành đẩy file thành công:
#### 3.2 Tạo DB 
- Create Database MySQL:
 Để tạo mới ` Database ` trên màn hình ta ấn chọn vào `MySQL® Databases` và tạo mới ` Database ` ở mục `Create New Database`

<img src="https://image.prntscr.com/image/eoe2eNJbTpeqfuSLx9RGag.png">

- Create User Database MySQL:
   - điền thông tin và chọn `Create User`

<img src="https://image.prntscr.com/image/o1ftZREyQKKsY0Nnt6GKOA.png">

- Gán  cho `user` kết nối `database` :


<img src="https://image.prntscr.com/image/avWNdF0hSKKEEWD6pG9EYg.png">

- Phân quyền cho user:

<img src="https://image.prntscr.com/image/0-RCxCKUQ0a2dmGwROWreQ.png">

  - sau khi phân quyền xong ấn ` Make change ` để lưu thay đổi và áp dụng


#### 3.3 up site Wordpress
 Sau khi đẩy file Wordpress lên bằng tài khoản FTP, tiến hành giải nén và lưu vào thư mục ` Public_html`

 <img src="https://image.prntscr.com/image/hTMpXB5gRf6tHRgcZo__Bw.png">

 - tiến hành `rename` file `wp-config-sample.php` thành ` wp-config.php` và cấu hình kết nối `Database `.

 <img src="https://image.prntscr.com/image/wQdxIYprS0mOFl6rbzXyDw.png">

 - truy cập thư mục `wp-contens` tạo mới thư mục `upload` để lưu trữ các bài đăng cửa website.


 <img src="https://image.prntscr.com/image/N-4uUFrgRECW0er_zvngyw.png">



sau khi cấu hình cài đặt website thành công tiến hành trỏ bản ghi DNS về ` IP ` server chạy Web và cài đặt  trên trình duyệt:
```
http://learning365.online
```


<img src="https://image.prntscr.com/image/Ix-R-GDETm_c6WAFgix6mQ.png">

kết quả :
<img src="https://image.prntscr.com/image/fKAG_0CtS62zxYqcreTzRw.png">  

### 4. Cài đặt Plugin Let's Encrypt trên cPanel
- Thêm package letsencrypt vào repository:
```
wget https://cpanel.fleetssl.com/static/letsencrypt.repo -O /etc/yum.repos.d/letsencrypt.repo
```
- Cài đặt Plugin thông qua lệnh yum
```
yum -y install letsencrypt-cpanel
```
- Test Plugin
```
le-cp self-test
```
- Nếu không có vấn đề gì hệ thống sẽ trả về SUCCESS:

<img src="https://image.prntscr.com/image/ACcSZOoRQOG8hECcdOX1qg.png">

-  check trên web:

<img src="https://image.prntscr.com/image/-IQqwTkzSTukfkrZ29UQbg.png">

- kiểm tra bảo mật tên miền:

<img src="https://image.prntscr.com/image/TukcRAclSA2a-ypJwTVuAw.png">

### 5. Tạo E-mail cho khách hàng theo tên miền

- Kéo xuống phần Email > Email Accounts

<img src="https://image.prntscr.com/image/DrU_AM03S0O9idmZu1ohNg.png">

- Bạn nhấn vào nút `CREATE` ở phía bên phải:

<img src="https://image.prntscr.com/image/tj3oxOdDR8aBsAhifyVmKA.png">

Ở cửa sổ mới hiện ra bạn làm như sau:

<img src="https://image.prntscr.com/image/QHxpqrqwRSCg5cWoe0mKUQ.png">

  - Bước 1: đặt tiền tố cho email, ví dụ info, admin hay contact…

  - Bước 2: đặt mật khẩu cho tài khoản email. Bạn có thể nhấn vào nút GENERATE để tự động tạo mật khẩu mạnh

  - Bước 3: Các thiết lập khác bạn có thể giữ nguyên. Xong thì nhấn `CREATE` để tiếp tục.

Bạn sẽ được đưa về màn hình lúc nãy. Nhấn vào nút CHECK MAIL trong email mà bạn vừa tạo xong.

<img src="https://image.prntscr.com/image/zeLMSEPyTEaOH__cRyp6zQ.png">

Chọn một ứng dụng Webmail làm mặc định. Ở đây mình chọn roundcube:

<img src="https://image.prntscr.com/image/SYMVwljESn2GhYSbZ0gThg.png">

### 6. kiểm tra tính năng gửi mail thông báo cho khách hàng khi thay đổi thông tin
- Cấu hình các trường hợp gửi mail thông báo tới khách hàng:
<img src="https://image.prntscr.com/image/eE8FZH1xQxm0pDGJeer6IQ.png">

- check mail kiểm tra khi thay đổi thông tin e-mail khách hàng.
   - trên tài khoản mail: `b@learning.online`
   <img src="https://image.prntscr.com/image/tzs0GKSDRz605wyjC1r3eA.png">
   - trên tài khoản mail : `xboy.vjp.292@gmail.com`
   <img src="https://image.prntscr.com/image/ogN4KVFaT2K2qrunX72ilg.png">

### 7. Backups Database, code




